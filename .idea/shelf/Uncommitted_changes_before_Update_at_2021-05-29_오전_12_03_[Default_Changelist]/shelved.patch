Index: app/src/main/java/com/example/darktour_project/Interest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.darktour_project;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.os.AsyncTask;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.io.OutputStream;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.util.ArrayList;\r\n\r\npublic class Interest extends AppCompatActivity {\r\n    RecyclerView mVerticalView;\r\n    RecyclerView mVerticalView2;\r\n    RecyclerView mVerticalView3;\r\n    VerticalAdapter mAdapter;\r\n    VerticalAdapter mAdapter2;\r\n    VerticalAdapter mAdapter3;\r\n    LinearLayoutManager mLayoutManager;\r\n    LinearLayoutManager mLayoutManager2;\r\n    LinearLayoutManager mLayoutManager3;\r\n    ArrayList<VerticalData> data = new ArrayList<>();\r\n    ArrayList<VerticalData> data2 = new ArrayList<>();\r\n    ArrayList<VerticalData> data3 = new ArrayList<>();\r\n    private Button completed;\r\n\r\n    private Context mContext;\r\n\r\n    int count = 0;\r\n\r\n    private static String TAG = \"phpquerytest\";\r\n    private static final String TAG_JSON=\"webnautes\";\r\n    String mJsonString;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.interest_history);\r\n        mContext = this;\r\n\r\n        //// 서울 유적지\r\n        mVerticalView = findViewById(R.id.history_recycler_seoul);\r\n        // init LayoutManager\r\n        mLayoutManager = new LinearLayoutManager(getApplicationContext());\r\n        mLayoutManager.setOrientation(LinearLayoutManager.HORIZONTAL); // 기본값이 VERTICAL\r\n        // setLayoutManager\r\n        mVerticalView.setLayoutManager(mLayoutManager);\r\n        // init Adapter\r\n        mAdapter = new VerticalAdapter();\r\n        // set Data\r\n        mAdapter.setData(data);\r\n        // set Adapter\r\n        mVerticalView.setAdapter(mAdapter);\r\n        // 코스 data 추가\r\n        GetData task = new GetData();\r\n        task.execute(\"서울\");\r\n\r\n        //// 제주 유적지\r\n        mVerticalView2 = findViewById(R.id.history_recycler_jeju);\r\n        // init LayoutManager\r\n        mLayoutManager2 = new LinearLayoutManager(getApplicationContext());\r\n        mLayoutManager2.setOrientation(LinearLayoutManager.HORIZONTAL); // 기본값이 VERTICAL\r\n        // setLayoutManager\r\n        mVerticalView2.setLayoutManager(mLayoutManager2);\r\n        // init Adapter\r\n        mAdapter2 = new VerticalAdapter();\r\n        // set Data\r\n        mAdapter2.setData(data2);\r\n        // set Adapter\r\n        mVerticalView2.setAdapter(mAdapter2);\r\n        // 코스 data 추가\r\n        GetData task2 = new GetData();\r\n        task2.execute(\"제주\");\r\n\r\n        //// 부산 유적지\r\n        mVerticalView3 = findViewById(R.id.history_recycler_busan);\r\n        // init LayoutManager\r\n        mLayoutManager3 = new LinearLayoutManager(getApplicationContext());\r\n        mLayoutManager3.setOrientation(LinearLayoutManager.HORIZONTAL); // 기본값이 VERTICAL\r\n        // setLayoutManager\r\n        mVerticalView3.setLayoutManager(mLayoutManager3);\r\n        // init Adapter\r\n        mAdapter3 = new VerticalAdapter();\r\n        // set Data\r\n        mAdapter3.setData(data3);\r\n        // set Adapter\r\n        mVerticalView3.setAdapter(mAdapter3);\r\n        // 코스 data 추가\r\n        GetData task3= new GetData();\r\n        task3.execute(\"부산\");\r\n\r\n        // 선택완료 버튼을 눌렀을 경우\r\n        /*completed.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String history = Checked(v).toString();\r\n                if (count > 0 && count <= 10) {\r\n                    Intent intent = new Intent(getApplicationContext(), MainActivity.class);\r\n                    intent.putExtra(\"it_check\", Checked(v));\r\n                    Log.d(\"it_check - \", Checked(v));\r\n\r\n                    String signupid = PreferenceManager.getString(mContext, \"signup_id\");\r\n\r\n                    String IP_ADDRESS = \"113.198.236.105\";\r\n                    InsertFavorite inserthistory = new InsertFavorite();\r\n                    inserthistory.execute(\"http://\" + IP_ADDRESS + \"/update_favorite_his.php\", signupid, history);\r\n                    Toast.makeText(getApplicationContext(), \"관심유적지가 선택되었습니다!\", Toast.LENGTH_LONG).show();\r\n                    startActivity(intent);\r\n\r\n                } else if (count == 0) {\r\n                    Toast.makeText(getApplicationContext(), \"관심유적지 선택해 주세요!\", Toast.LENGTH_LONG).show();\r\n                } else if (count > 10) {\r\n                    Toast.makeText(getApplicationContext(), \"10개 이하로 선택해주세요!\", Toast.LENGTH_LONG).show();\r\n                }\r\n            }\r\n        });*/\r\n    }\r\n\r\n    // 카드뉴스\r\n    class VerticalAdapter extends RecyclerView.Adapter<VerticalViewHolder> {\r\n\r\n        private ArrayList<VerticalData> verticalDatas;\r\n        private Context context;\r\n\r\n        public void setContext(Context context) {\r\n            this.context = context;\r\n        }\r\n        public void setData(ArrayList<VerticalData> list){\r\n            verticalDatas = list;\r\n        }\r\n\r\n        @Override\r\n        public VerticalViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n\r\n            // 사용할 아이템의 뷰를 생성해준다.\r\n            View view = LayoutInflater.from(parent.getContext())\r\n                    .inflate(R.layout.historic_sites_item, parent, false);\r\n\r\n            VerticalViewHolder holder = new VerticalViewHolder(view);\r\n\r\n            return holder;\r\n        }\r\n\r\n        @Override\r\n        public void onBindViewHolder(VerticalViewHolder holder, int position) {\r\n            final VerticalData data = verticalDatas.get(position);\r\n\r\n            // setData\r\n            //holder.icon.setImageResource(data.getImg());\r\n            Glide.with(Interest.this).load(data.getImg()).into(holder.icon);\r\n            holder.description.setText(data.getArea());\r\n            holder.name.setText(data.getHistory());\r\n\r\n            // 추천 코스 클릭했을때\r\n            // setOnClick\r\n            holder.icon.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    Log.d(\"Debug\", data.getArea());\r\n                    Intent intent = new Intent(getApplicationContext(), DetailPage.class);\r\n                    intent.putExtra(\"historyname\",data.getHistory()); // 코스이름 DetailPage로 넘김\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n        }\r\n\r\n        @Override\r\n        public int getItemCount() {\r\n            return verticalDatas.size();\r\n        }\r\n    }\r\n\r\n    class VerticalViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        public ImageView icon;\r\n        public TextView description;\r\n        public TextView name;\r\n\r\n        public VerticalViewHolder(View itemView) {\r\n            super(itemView);\r\n\r\n            icon = (ImageView) itemView.findViewById(R.id.horizon_icon);\r\n            description = (TextView) itemView.findViewById(R.id.horizon_description);\r\n            name = (TextView) itemView.findViewById(R.id.horizon_description2);\r\n\r\n        }\r\n    }\r\n    //사용자 추천 코스 순위 data\r\n    class VerticalData {\r\n\r\n        private String img;\r\n        private String area;\r\n        private String history;\r\n\r\n\r\n        public VerticalData(String img, String area, String history) {\r\n            this.img = img;\r\n            this.area = area;\r\n            this.history = history;\r\n        }\r\n        public String getImg() { return this.img; }\r\n\r\n        public String getArea() { return this.area; }\r\n\r\n        public String getHistory() { return this.history; }\r\n    }\r\n\r\n    /*public String Checked(View view) { // 체크되었을 때 동작하는 메소드 구현\r\n        String resultText = \"\"; // 체크되었을 때 값을 저장할 스트링 값\r\n        if(interest.isChecked()) {\r\n            resultText += interest.getText().toString() + \", \";\r\n        }\r\n        if(interest2.isChecked()) {\r\n            resultText += interest2.getText().toString() + \", \";\r\n        }\r\n        if(interest3.isChecked()) {\r\n            resultText += interest3.getText().toString() + \", \";\r\n        }\r\n        if(interest4.isChecked()) {\r\n            resultText += interest4.getText().toString() + \", \";\r\n        }\r\n        if(interest5.isChecked()) {\r\n            resultText += interest5.getText().toString() + \", \";\r\n        }\r\n        if(interest6.isChecked()) {\r\n            resultText += interest6.getText().toString() + \", \";\r\n        }\r\n        if(interest7.isChecked()) {\r\n            resultText += interest7.getText().toString() + \", \";\r\n        }\r\n        if(interest8.isChecked()) {\r\n            resultText += interest8.getText().toString() + \", \";\r\n        }\r\n        if(interest9.isChecked()) {\r\n            resultText += interest9.getText().toString() + \", \";\r\n        }\r\n        return resultText; // 체크된 값 리턴\r\n    }*/\r\n\r\n    // 체크된 체크박스의 개수 count\r\n    private  void isCheckedOrNot(boolean isChecked) {\r\n        if (isChecked) {\r\n            count ++;\r\n        } else {\r\n            if (count > 0) {\r\n                count --;\r\n            }\r\n        }\r\n    }\r\n\r\n    // DB 연결\r\n    private class GetData extends AsyncTask<String, Void, String> {\r\n\r\n        ProgressDialog progressDialog;\r\n        String errorString = null;\r\n\r\n        @Override\r\n        protected void onPreExecute() {\r\n            super.onPreExecute();\r\n            progressDialog = ProgressDialog.show(Interest.this,\r\n                    \"Please Wait\", null, true, true);\r\n\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(String result) {\r\n            super.onPostExecute(result);\r\n\r\n            progressDialog.dismiss();\r\n            Log.d(TAG, \"response - \" + result);\r\n\r\n            if (result == null){\r\n            }\r\n            else {\r\n                mJsonString = result;\r\n                showResult();\r\n            }\r\n        }\r\n\r\n        @Override\r\n        protected String doInBackground(String... params) {\r\n\r\n            String searchKeyword1 = params[0]; // 그 유적지 이름 받아오는 함수 있어야함\r\n\r\n            String serverURL = \"http://113.198.236.105/select_area.php\";\r\n            String postParameters = \"ADDRESS=\" + searchKeyword1;\r\n\r\n            try {\r\n\r\n                URL url = new URL(serverURL);\r\n                HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();\r\n\r\n                httpURLConnection.setReadTimeout(5000);\r\n                httpURLConnection.setConnectTimeout(5000);\r\n                httpURLConnection.setRequestMethod(\"POST\");\r\n                httpURLConnection.setDoInput(true);\r\n                httpURLConnection.connect();\r\n\r\n                OutputStream outputStream = httpURLConnection.getOutputStream();\r\n                outputStream.write(postParameters.getBytes(\"UTF-8\"));\r\n                outputStream.flush();\r\n                outputStream.close();\r\n\r\n                int responseStatusCode = httpURLConnection.getResponseCode();\r\n                Log.d(TAG, \"response code - \" + responseStatusCode);\r\n                InputStream inputStream;\r\n                if(responseStatusCode == HttpURLConnection.HTTP_OK) {\r\n                    inputStream = httpURLConnection.getInputStream();\r\n                }\r\n                else{\r\n                    inputStream = httpURLConnection.getErrorStream();\r\n                }\r\n                InputStreamReader inputStreamReader = new InputStreamReader(inputStream, \"UTF-8\");\r\n                BufferedReader bufferedReader = new BufferedReader(inputStreamReader);\r\n                StringBuilder sb = new StringBuilder();\r\n                String line;\r\n                while((line = bufferedReader.readLine()) != null){\r\n                    sb.append(line);\r\n                }\r\n                bufferedReader.close();\r\n                return sb.toString().trim();\r\n\r\n            } catch (Exception e) {\r\n                Log.d(TAG, \"InsertData: Error \", e);\r\n                errorString = e.toString();\r\n                return null;\r\n            }\r\n\r\n        }\r\n        // 받아온 결과값 나누는거\r\n        private void showResult(){\r\n            try {\r\n                Log.d(TAG, \"all\" + mJsonString);\r\n\r\n                JSONObject jsonObject = new JSONObject(mJsonString);\r\n                JSONArray jsonArray = jsonObject.getJSONArray(TAG_JSON);\r\n\r\n                for(int i=0; i<jsonArray.length(); i++){\r\n                    JSONObject item = jsonArray.getJSONObject(i);\r\n                    String name = item.getString(\"name\");\r\n                    String incident = item.getString(\"incident\");\r\n                    String his_image = item.getString(\"his_image\");\r\n\r\n                    data.add(new VerticalData(his_image, incident, name));\r\n                    data2.add(new VerticalData(his_image, incident, name));\r\n                    data3.add(new VerticalData(his_image, incident, name));\r\n                }\r\n                mAdapter.notifyDataSetChanged();\r\n\r\n\r\n            } catch (JSONException e) {\r\n                Log.d(TAG, \"showResult : \", e);\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/darktour_project/Interest.java	(revision 9ae0bc071b6dd9f2e3c585094e0a2767b6da8449)
+++ app/src/main/java/com/example/darktour_project/Interest.java	(date 1622096644483)
@@ -178,10 +178,10 @@
             holder.icon.setOnClickListener(new View.OnClickListener() {
                 @Override
                 public void onClick(View view) {
-                    Log.d("Debug", data.getArea());
-                    Intent intent = new Intent(getApplicationContext(), DetailPage.class);
+                    Log.d("his_name", data.getArea());
+                    /*Intent intent = new Intent(getApplicationContext(), DetailPage.class);
                     intent.putExtra("historyname",data.getHistory()); // 코스이름 DetailPage로 넘김
-                    startActivity(intent);
+                    startActivity(intent);*/
                 }
             });
         }
@@ -195,8 +195,8 @@
     class VerticalViewHolder extends RecyclerView.ViewHolder {
 
         public ImageView icon;
-        public TextView description;
-        public TextView name;
+        public TextView description; // 사건이름
+        public TextView name; // 유적지이름
 
         public VerticalViewHolder(View itemView) {
             super(itemView);
@@ -364,8 +364,8 @@
                     String his_image = item.getString("his_image");
 
                     data.add(new VerticalData(his_image, incident, name));
-                    data2.add(new VerticalData(his_image, incident, name));
-                    data3.add(new VerticalData(his_image, incident, name));
+                    //data2.add(new VerticalData(his_image, incident, name));
+                    //data3.add(new VerticalData(his_image, incident, name));
                 }
                 mAdapter.notifyDataSetChanged();
 
